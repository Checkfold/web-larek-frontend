# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

<!-- Для реализации нашего приложения нам необходимо реализовать разные классы для работы с данными:


1. Для формирования карточки используется класс Product.

```
Product {
    "id": string;
    "description": string;
    "image": string;
    "title": string;
    "category": string;
    "price": number;
    
    openCard(): void;
}
```

2. За оформлеение товара отвечает класс Order.

```
Order {
    "payment": string;
    "email": string;
    "phone": string;
    "address": string;
    "total": number;
    "items": string[];

    openBasket(): void
}
```

Главная страница:

1. Для открытия корзины используется метод openBasket класса Order.
2. Для открытия карточки используется метод openCard класса ProductCard, отправляет API запрос для проверки валидности карточки.

Просмотр товара:

1. При открытии карточки отображается полная информация получаемая из класса ProductCard.
2. При нажатии на кнопку купить срабатывает метод addProductToBasket класса ProductCard, которая добовляет id товара в масив items класса Order и пересчитывает total.
3. При нажатии на кнопку убрать срабатывает метод deleteProductFromBasket класса ProductCard, которая удаляет id товара из массива items класса Order и пересчитывает total.

Оформление товара:

1. За выбор способа оплаты отвечает метод choosePayment класса Order, который записывает в поле payment текущий выбор оплаты.
2. За валидацию введенных данных в поле adress отвечает метод isAdressValid класса Order.
3. Если не заполнен способ оплаты и адрес не прошёл валидацию, кнопка "Далее" недоступна.
4. Если введенный адрес не валидный срабатывает метод getErrorMessage класса Order.

5. Если одно из полей email или phone не заполнено или не прошло валидацию, то срабатывает метод getErrorMessage класса Order.
6. При нажатии кнопки оплаты срабатывает метод submitOrder класса Order и отправляет API запрос, если ответ успешен - очищаются поля items и total. -->

# Архитектура MVP

Приложение построено по паттерну MVP (Model-View-Presenter):

#### Model (Модель) - содержит данные и бизнес-логику приложения. Отвечает за хранение состояния, валидацию данных и взаимодействие с API. Реализована классом AppState.

#### View (Представление) - отображает пользовательский интерфейс. Пассивный слой, который только показывает данные и передает пользовательские действия Presenter'у. Включает компоненты: Card, Basket, Page, Form, Order, Contacts, Modal, Success.

#### Presenter (Представитель) - посредник между Model и View. Содержит всю бизнес-логику, обрабатывает события от View, обновляет Model и обновляет View. Реализован в index.ts.

# Событийная модель приложения

В приложении используется событийно-ориентированный подход: все изменения состояния данных и взаимодействие с интерфейсом происходят через централизованный объект событий (EventEmitter). Компоненты подписываются на события и реагируют на них, что обеспечивает слабую связанность между модулями, упрощает масштабирование и поддержку приложения.

Ниже перечислены все события, которые используются в приложении, с описанием момента срабатывания, аргументов и назначения.

## Список событий

1. `products:updated`
Когда срабатывает: при обновлении списка товаров.
Аргументы: products: IProduct[] — массив актуальных товаров.
Назначение: уведомляет компоненты о том, что каталог товаров обновлён.

2. `basket:updated`
Когда срабатывает: при изменении корзины (добавление, удаление или очистка товаров).
Аргументы: basket: IBasket — текущие данные корзины (товары и общая сумма).
Назначение: уведомляет интерфейс о состоянии корзины и позволяет обновить отображение.

3. `product:viewed`
Когда срабатывает: при выборе товара для предпросмотра.
Аргументы: preview: IProduct — товар, выбранный для просмотра.
Назначение: позволяет открыть модальное окно с деталями товара.

4. `order:ready`
Когда срабатывает: если все обязательные поля заказа заполнены.
Аргументы: order: IOrder — данные текущего заказа, включая товары и общую сумму.
Назначение: уведомляет, что заказ готов к оформлению.

5. `errors:updated`
Когда срабатывает: после проверки обязательных полей формы.
Аргументы: formErrors: FormErrors — объект с ошибками для каждого поля.
Назначение: позволяет отобразить ошибки пользователю в интерфейсе.

6. `modal:open`
Когда срабатывает: при открытии модального окна.
Аргументы: отсутствуют.
Назначение: уведомляет интерфейс о том, что модальное окно открыто (например, для блокировки прокрутки страницы).

7. `modal:close`
Когда срабатывает: при закрытии модального окна.
Аргументы: отсутствуют.
Назначение: уведомляет интерфейс о закрытии модального окна (например, для разблокировки прокрутки).

8. `bids:open`
Когда срабатывает: при открытии корзины пользователем.
Аргументы: отсутствуют.
Назначение: отображает корзину в модальном окне и обновляет список товаров.

9. `order:open`
Когда срабатывает: при открытии формы заказа.
Аргументы: отсутствуют.
Назначение: открывает модальное окно с формой заказа.

10. `order:submit`
Когда срабатывает: при отправке формы заказа.
Аргументы: отсутствуют.
Назначение: открывает форму контактов для подтверждения данных.

11. `contacts:submit`
Когда срабатывает: при отправке формы контактов.
Аргументы: отсутствуют.
Назначение: очищает корзину, обновляет счётчик товаров и показывает окно успеха.

## Описание базовых типов данных

#### Интерфейс IProduct

```
interface IProduct {
    id: string;           // Уникальный идентификатор товара
    title: string;        // Название товара
    description: string;  // Описание товара
    image: string;        // URL изображения товара
    category: string;     // Категория товара
    price: number | null; // Цена товара (может быть null)
}
```

Предназначение: Описывает структуру данных товара в каталоге магазина.



#### Интерфейс IOrderForm

```
interface IOrderForm {
    payment: string;  // Способ оплаты
    email: string;    // Email покупателя
    phone: string;    // Телефон покупателя
    address: string;  // Адрес доставки
}
```

Предназначение: Содержит данные формы заказа, вводимые пользователем.



#### Интерфейс IBasket

```
interface IBasket {
    items: string[]; // Массив идентификаторов товаров в корзине
    total: number;   // Общая стоимость товаров в корзине
}
```

Предназначение: Описывает состояние корзины покупателя.



#### Интерфейс IFormState
```
export interface IFormState {
    isValid: boolean;
    errors: string[];
}
```
Предназначение: Определяет структуру для хранения состояния валидации формы. Он используется для отслеживания корректности заполнения формы и сбора ошибок валидации.



#### Интерфейс IModalData
```
export interface IModalData {
    content: HTMLElement;
}
```
Предназначение: Определяет структуру данных для управления модальными окнами приложения. Он служит контейнером для контента, который должен отображаться в модальном окне.



#### Интерфейс ICardActions
```
export interface ICardActions {
    onClick: (event: MouseEvent) => void;
}
```
Предназначение: Интерфейс ICardActions определяет структуру для обработки действий пользователя с карточками товаров. Он служит контрактом для передачи функций-обработчиков кликов в компоненты карточек.



#### Интерфейс IOrderResult

```
interface IOrderSucces {
    id: string;    // Идентификатор созданного заказа
    total: number; // Итоговая сумма заказа
}
```
Предназначение: Результат успешного оформления заказа.



#### Тип PaymentMethod

```
type PaymentMethod = 'online' | 'cash';
```
Предназначение: Определяет допустимые способы оплаты в приложении.



#### Тип FormErrors

```
export type FormErrors = Partial<Record<keyof IOrder, string>>;
```
Предназначение: Тип FormErrors предназначен для хранения ошибок валидации формы заказа. Он представляет собой объект, где ключи соответствуют полям интерфейса IOrder, а значения - текстовым сообщениям об ошибках.

Структура FormErrors:

Partial - делает все свойства объекта необязательными
Record<keyof IOrder, string> - создает тип объекта, где:
Ключи: все поля из интерфейса IOrder (payment, email, phone, address, total, items)
Значения: строки с сообщениями об ошибках

```
type FormErrors = {
    payment?: string;   // Ошибка для поля способа оплаты
    email?: string;    // Ошибка для поля email
    phone?: string;    // Ошибка для поля телефона
    address?: string;  // Ошибка для поля адреса
    total?: string;    // Ошибка для поля общей суммы
    items?: string;    // Ошибка для поля товаров
}
```



#### Интерфейс ILarekAPI

```
export interface ILarekAPI {
    getProductList: () => Promise<IProduct[]>; // Получение списка товаров из каталога магазина. Возвращает: Promise с массивом товаров типа IProduct[]
    orderProducts: (order: IOrder) => Promise<IOrderSuccess>; // Оформление заказа товаров. Возвращает: Promise с результатом оформления заказа типа IOrderSuccess
}
```
Назначение: Интерфейс ILarekAPI определяет контракт для работы с API магазина. Он описывает методы для взаимодействия с серверной частью приложения.



## Описание классов

#### Класс AppData
Назначение класса: Класс AppData управляет данными приложения, включая список товаров, корзину, заказ, ошибки формы и предпросмотр товара. Обеспечивает методы для обновления данных и уведомления подписчиков через события IEvents.

Структура класса:

##### Публичные свойства
```
products: IProduct[];       // Список доступных товаров
order: IOrder;              // Данные текущего заказа (поля заказа и список товаров)
basket: IBasket;            // Данные корзины (список товаров и общая сумма)
formErrors: FormErrors;     // Ошибки валидации формы заказа
preview: IProduct;          // Товар, выбранный для предпросмотра

```

##### Конструктор
```
constructor(events: IEvents)
```
events: IEvents — объект для подписки и отправки событий об изменениях данных.

##### Публичные методы:
1. loadProducts
```
loadProducts(products: IProduct[]): void
```
Загружает список товаров и эмитит событие 'products:updated'.
products: IProduct[] — массив товаров для загрузки.

2. addBasket
```
addBasket(product: IProduct): void
```
Добавляет товар в корзину, обновляет общую сумму и эмитит 'basket:updated'.
product: IProduct — добавляемый товар.

3. deleteBasket
```
deleteBasket(product: IProduct): void
```
Удаляет товар из корзины, пересчитывает сумму и эмитит 'basket:updated'.
product: IProduct — удаляемый товар.

4. clearBasket
```
clearBasket(): void
```
Очищает корзину и общую сумму, эмитит 'basket:updated'.

5. getBasketCount
```
getBasketCount(): number
```
Возвращает количество товаров в корзине.

6. isProductInBasket
```
isProductInBasket(productId: string): boolean
```
Проверяет, находится ли товар в корзине.
productId: string — идентификатор товара.

7. setPreview
```
setPreview(product: IProduct): void
```
Устанавливает товар для предпросмотра и эмитит 'product:viewed'.
product: IProduct — товар для предпросмотра.

8. setPaymentMethod
```
setPaymentMethod(method: paymentMethod): void
```
Устанавливает способ оплаты для заказа.
method: paymentMethod — выбранный способ оплаты.

9. updateField
```
updateField(field: keyof IOrderForm, value: string): void
```
Обновляет поле заказа, проверяет заполненность всех обязательных полей и эмитит `'order:ready'`, если все поля заполнены. `field: keyof IOrderForm` — имя поля заказа,`value: string` — новое значение поля

10. checkFields
```
checkFields(): boolean
```
Проверяет обязательные поля заказа (payment, address, email, phone).
Возвращает true, если все поля заполнены, иначе false. Эмитит 'errors:updated' при наличии ошибок.

##### Приватные методы:
1. getErrorMessage
```
private getErrorMessage(field: keyof IOrderForm): string
```
Возвращает текст ошибки для конкретного поля заказа.
field: keyof IOrderForm — проверяемое поле заказа.



#### Класс LarekAPI
Назначение класса: Класс LarekAPI является реализацией интерфейса ILarekAPI и предоставляет методы для взаимодействия с backend-API интернет-магазина. Наследуется от базового класса Api и добавляет специфичную для приложения логику.

Структура класса:

Конструктор:

```
constructor(cdn: string, baseUrl: string, options?: RequestInit)
```

1. cdn - базовый URL CDN для обработки изображений
2. baseUrl - базовый URL API сервера
3. options - опциональные настройки HTTP-запросов

##### Публичные методы: 
1. fetchProductList()


```
async fetchProductList(): Promise<IProduct[]>
```
Назначение: Получает список товаров из каталога магазина.

Внутренняя логика:
1. Выполняет GET-запрос к endpoint /product
2. Преобразует полученные данные в массив товаров
3. Обрабатывает URL изображений через CDN

Возвращает: Promise с массивом товаров типа IProduct[]

2. submitOrder()

```
async submitOrder(orderData: IOrder): Promise<IOrderSuccess>
```
Назначение: Отправляет данные заказа на сервер.

Параметры:
1. orderData: IOrder - объект с данными заказа

Внутренняя логика:
1. Выполняет POST-запрос к endpoint /order
2. Передает данные заказа в теле запроса

Возвращает: Promise с результатом оформления заказа

##### Приватные методы: 
1. formatImageUrl()

```
private formatImageUrl(originalUrl: string): string
```
Назначение: Преобразует исходный URL изображения для использования CDN.

Логика преобразования:
1. Добавляет CDN base URL
2. Заменяет расширение .svg на .png 



#### Класс Component<T>
Назначение класса: Класс Component<T> является абстрактным базовым классом для всех компонентов пользовательского интерфейса. Он предоставляет базовые методы для работы с DOM-элементами и управления их состоянием. Реализует паттерн "Представитель" (Presenter) для связи между данными и их представлением.

Структура класса:

Конструктор:
```
protected constructor(protected readonly container: HTMLElement)
```
1. container - корневой DOM-элемент, который представляет компонент

##### Публичные методы:
1. toggleClass(element: HTMLElement, className: string, force?: boolean)
```
toggleClass(element: HTMLElement, className: string, force?: boolean): void
```
Назначение: Переключает CSS класс на указанном элементе. Параметры: element - целевой DOM-элемент, className - имя CSS класса для переключения, force? - опциональный флаг принудительного добавления/удаления.


2. render(data?: Partial<T>): HTMLElement
```
render(data?: Partial<T>): HTMLElement
```
Назначение: Основной метод для обновления и отображения компонента. Параметры: data?: Partial<T> - опциональные данные для частичного обновления. Возвращает: HTMLElement - корневой элемент компонента

##### Защищенные методы (для наследования):
1. setText(element: HTMLElement, value: unknown)
```
protected setText(element: HTMLElement, value: unknown): void
```
Назначение: Устанавливает текстовое содержимое элемента. Проверяет существование элемента. Преобразует любое значение в строку. Безопасная установка textContent

2. setHidden(element: HTMLElement)
```
protected setHidden(element: HTMLElement): void
```
Назначение: Скрывает элемент через CSS. Устанавливает display: none

3. setVisible(element: HTMLElement)
```
protected setVisible(element: HTMLElement): void
```
Назначение: Показывает элемент. Удаляет свойство display

4. setImage(element: HTMLImageElement, src: string, alt?: string)
```
protected setImage(element: HTMLImageElement, src: string, alt?: string): void
```
Назначение: Устанавливает изображение с альтернативным текстом. Параметры: element - элемент изображения, src - URL изображения, alt? - опциональный альтернативный текст



#### Класс Form<T>
Назначение класса: Класс Form<T> является специализированным компонентом для работы с HTML-формами. Наследуется от Component<IFormState> и добавляет функциональность для обработки пользовательского ввода, валидации и отправки данных форм. Реализует паттерн "Наблюдатель" для обработки событий формы.

Структура класса:

Конструктор: 
```
constructor(protected container: HTMLFormElement, protected events: IEvents)
```
1. container - HTMLFormElement, корневой элемент формы
2. events - экземпляр системы событий для коммуникации между компонентами

##### Защищенные свойства

```
protected _submit: HTMLButtonElement;    // Кнопка отправки формы
protected _errors: HTMLElement;          // Контейнер для отображения ошибок
```

##### Публичные методы и свойства
1. Сеттер valid: boolean
```
set valid(value: boolean)
```
Назначение: Управляет состоянием кнопки отправки формы. Устанавливает атрибут disabled на кнопке в зависимости от валидности формы.

2. Сеттер errors: string
```
set errors(value: string)
```
Назначение: Устанавливает текст ошибок валидации. Обновляет текстовое содержимое контейнера ошибок.

3. Метод render(state: Partial<T> & IFormState)
```
render(state: Partial<T> & IFormState): HTMLElement
```
Назначение: Обновляет состояние формы и отображает её. 
Параметры: state - комбинированный объект состояния, содержащий:
    isValid - флаг валидности формы
    errors - сообщения об ошибках
    поля данных формы типа T

##### Защищенные методы
1. onInputChange(field: keyof T, value: string)
```
protected onInputChange(field: keyof T, value: string): void
```
Назначение: Обрабатывает изменения в полях ввода. Генерирует событие изменения поля в формате {formName}.{fieldName}:change



#### Класс Modal
Назначение класса: Класс Modal является компонентом для управления модальными окнами приложения. Наследуется от Component<IModalData> и предоставляет функциональность для открытия, закрытия и управления содержимым модальных окон. Реализует паттерн "Команда" для управления состоянием модального окна.

Структура класса:

Конструктор:
```
constructor(container: HTMLElement, protected events: IEvents)
```
container - корневой элемент модального окна
events - экземпляр системы событий для коммуникации

##### Защищенные свойства
```
protected _closeButton: HTMLButtonElement; // Кнопка закрытия модального окна
protected _content: HTMLElement;           // Контейнер для содержимого модального окна
```

##### Публичные методы и свойства
1. Сеттер content: HTMLElement
```
set content(value: HTMLElement)
```
Назначение: Устанавливает содержимое модального окна. Полностью заменяет дочерние элементы в контейнере содержимого.

2. Метод open()
```
open(): void
```
Назначение: Открывает модальное окно. Добавляет CSS класс modal_active для отображения окна. Генерирует событие modal:open

3. Метод close()
```
close(): void
```
Назначение: Закрывает модальное окно. Удаляет CSS класс modal_active для скрытия окна. Очищает содержимое модального окна. Генерирует событие modal:close

4. Метод render(data: IModalData)
```
render(data: IModalData): HTMLElement
```
Назначение: Обновляет и открывает модальное окно. Обновляет базовый компонент с переданными данными. Открывает модальное окно. Возвращает корневой элемент модального окна. Принимает параметром data - объект с данными для отображения в модальном окне. 



#### Класс Card
Назначение: Класс Card представляет карточку товара или элемента корзины. Наследуется от Component<IProduct & { index?: number }> и обеспечивает управление отображением заголовка, изображения, описания, категории, цены, индекса в корзине и кнопки действия. Поддерживает подключение коллбека на клик для кнопки или всей карточки.

Структура класса:

##### Защищённые свойства
```
protected _title: HTMLElement;          // Элемент для отображения названия товара
protected _image?: HTMLImageElement;    // Элемент для отображения изображения
protected _description?: HTMLElement;   // Элемент для отображения описания товара
protected _category?: HTMLElement;      // Элемент для отображения категории товара
protected _button?: HTMLButtonElement;  // Кнопка действия (купить/удалить)
protected _price: HTMLElement;          // Элемент для отображения цены
protected _index?: HTMLElement;         // Элемент для отображения индекса в корзине
```

##### Конструктор:
```
constructor(container: HTMLElement, actions?: ICardActions)
```
container: HTMLElement — контейнер карточки товара.
actions?: ICardActions — объект с коллбеками действий карточки.
onClick?: () => void — функция, вызываемая при клике на кнопку или на всю карточку.

##### Публичные методы и свойства (сеттеры):
1. Сеттер id
```
set id(value: string)
```
Устанавливает атрибут data-id для контейнера карточки. Принимает параметром: `value: string` — идентификатор карточки.

2. Сеттер title
```
set title(value: string)
```
Устанавливает текст заголовка карточки.

3. Сеттер description
```
set description(value: string)
```
Устанавливает текст описания карточки.

4. Сеттер image
```
set image(value: string)
```
Устанавливает изображение карточки и атрибут alt.

5. Сеттер price
```
set price(value: number | null)
```
Отображает цену карточки в формате "X синапсов" или "Бесценно", если значение отсутствует. Блокирует кнопку действия, если цена не указана. Принимает параметром: `value: number | null` — цена товара.

6. Сеттер index
```
set index(value: number)
```
Отображает порядковый номер товара в корзине. Принимает параметром: `value: string` — название категории.

7. Сеттер button
```
set button(value: string)
```
Устанавливает текст кнопки действия на карточке. Принимает параметром: `value: string` — текст кнопки.



#### Класс Order
Назначение класса: Класс Order является компонентом для управления формой оформления заказа. Наследуется от Form<IOrderForm> и предоставляет функциональность для выбора способа оплаты и управления адресом доставки. Реализует паттерн "Состояние" для управления визуальным представлением выбранного способа оплаты и валидностью формы.

Структура класса:

##### Защищенные свойства
```
protected _onlineButton: HTMLButtonElement; // Кнопка выбора онлайн-оплаты
protected _cashButton: HTMLButtonElement;    // Кнопка выбора оплаты наличными
protected _addressField: HTMLInputElement;   // Поле ввода адреса доставки

```
Конструктор
```
constructor(container: HTMLFormElement, events: IEvents)

```
Назначение: Инициализирует экземпляр класса Order. Вызывает конструктор родительского класса Form и настраивает обработчики для кнопок оплаты и поля адреса. Принимает параметрами: `container: HTMLFormElement` - HTML-элемент формы заказа.между компонентами, `events: IEvents` - экземпляр системы событий для коммуникации между компонентами.

##### Приватные методы
1. Метод findButton
```
private findButton(name: string): HTMLButtonElement
```
Назначение: Находит кнопку оплаты по указанному имени. Использует функцию ensureElement для гарантированного получения элемента. Принимает параметром: `name: string` - имя кнопки для поиска ("online" или "cash").

2. Метод handlePaymentSelection
```
private handlePaymentSelection(method: paymentMethod): void
```
Назначение: Обрабатывает выбор способа оплаты. Устанавливает выбранный способ, помечает поле как тронутое, генерирует событие изменения и обновляет валидность формы. Принимает параметром: `method: paymentMethod` - выбранный способ оплаты ("online" или "cash").

3. Метод setupPaymentHandlers
```
private setupPaymentHandlers(): void
```
Назначение: Настраивает обработчики кликов для кнопок выбора способа оплаты, чтобы пользователь мог переключать варианты оплаты.

4. Метод setupAddressHandler
```
private setupAddressHandler(): void
```
Назначение: Настраивает обработчик ввода для поля адреса доставки. Отслеживает изменения, помечает поле как тронутое, обновляет внутреннее состояние и валидность формы.

5. Метод getErrorMessage
```
private getErrorMessage(): string
```
Назначение: Возвращает сообщение об ошибке формы в зависимости от текущего состояния полей.

6. Метод updateValidity
```
private updateValidity(): void
```
Назначение:Обновляет валидность формы и отображение ошибок. Кнопка отправки активируется только если пользователь что-то изменил и нет ошибок.

##### Публичные методы и свойства
1. Сеттер payment
```
set payment(value: paymentMethod)
```
Назначение: Устанавливает выбранный способ оплаты, обновляет визуальное состояние кнопок (button_alt-active) и пересчитывает валидность формы. Принимает параметром `value: paymentMethod` - способ оплаты для установки ("online" или "cash").

2. Сеттер address
```
set address(value: string)
```
Назначение: Устанавливает значение поля адреса доставки, обновляет внутреннее состояние и валидность формы. Принимает параметром: `value: string` - адрес для установки



#### Класс Basket
Назначение класса: Класс Basket является компонентом для управления корзиной товаров. Наследуется от Component<IBasketView> и предоставляет функциональность отображения списка товаров, общей суммы, состояния кнопки оформления заказа и реакции на события клика по корзине.

Структура класса:

##### Защищенные свойства:
```
protected _list: HTMLElement;   // Список элементов корзины
protected _total: HTMLElement;  // Элемент для отображения общей суммы
protected _button: HTMLElement; // Кнопка оформления заказа
```
Конструктор:
```
constructor(container: HTMLElement, protected events: IEvents)
```
Инициализирует экземпляр класса Basket. Настраивает элементы DOM согласно HTML-шаблону, подключает обработчик клика по кнопке оформления заказа, который генерирует событие `order:open`. Принимает 2 параметра: `container: HTMLElement` - HTML-элемент контейнера корзины, `events: IEvents` - экземпляр системы событий для коммуникации между компонентами.

##### Публичные методы и свойства:
1. Сеттер items
```
set items(items: HTMLElement[])
```
Назначение: Устанавливает список товаров в корзине. Обновляет содержимое контейнера списка и управляет состоянием кнопки оформления заказа. Если в корзине есть товары: заменяет содержимое списка переданными элементами и активирует кнопку. Если корзина пуста: отображает сообщение "Корзина пуста" и деактивирует кнопку. Принимает параметром: `items: HTMLElement[]` - массив HTML-элементов товаров

2. Сеттер selected
```
set selected(items: string[])
```
Назначение: Управляет состоянием кнопки оформления заказа в зависимости от выбранных товаров. Если есть выбранные товары: активирует кнопку оформления заказа. Если нет выбранных товаров: деактивирует кнопку оформления заказа. Принимает параметром: `items: string[]` - массив идентификаторов выбранных товаров

3. Сеттер total
```
set total(total: number)
```
Назначение: Устанавливает общую сумму корзины в удобочитаемом формате. Отображает сумму в формате "X синапсов". Принимает параметром: `total: number` - общая сумма корзины



#### Класс Contacts
Назначение: Класс Contacts является компонентом для управления формой контактной информации при оформлении заказа. Наследуется от Form<IOrderForm> и предоставляет функциональность ввода и валидации email и телефона. Отслеживает состояние полей и активирует кнопку отправки только при корректном вводе данных.

Структура класса:

##### Приватные свойства
```
private _emailField: HTMLInputElement; // Поле ввода email
private _phoneField: HTMLInputElement; // Поле ввода телефона
private _emailTouched: boolean = false; // Флаг, что email был изменён
private _phoneTouched: boolean = false; // Флаг, что телефон был изменён
private _valid: boolean = false;        // Внутренний флаг валидности формы
```

##### Конструктор
```
constructor(container: HTMLFormElement, events: IEvents)
```
Назначение: Инициализирует экземпляр класса Contacts. Вызывает конструктор родительского класса Form, находит поля email и телефона в DOM, настраивает обработчики ввода и проверку валидности. Принимает параметрами: `container: HTMLFormElement` — HTML-элемент формы контактов, `events: IEvents` — система событий для генерации и обработки событий формы.

##### Приватные методы
1. Метод setupHandlers
```
private setupHandlers(): void

```
Назначение: Настраивает обработчики input для полей email и телефона. Отслеживает изменения значений и помечает поля как тронутые для корректной валидации.

2. Метод getErrorMessage
```
private getErrorMessage(): string
```
Назначение: Возвращает сообщение об ошибке в зависимости от состояния полей. Если поле email пустое и пользователь его тронул или тронул телефон → "Необходимо указать email". сли поле телефона пустое и пользователь его тронул или тронул email → "Необходимо указать телефон". Иначе → пустая строка (нет ошибок).

3. Метод updateValidity
```
private updateValidity(): void
```
Назначение: Обновляет внутреннюю валидность формы и сообщение об ошибках. Управляет состоянием кнопки отправки формы через родительский сеттер valid.

##### Публичные методы и свойства
1. Геттер valid
```
get valid(): boolean
```
Назначение: Возвращает true, если форма корректно заполнена (нет сообщений об ошибках), иначе false.

2. Сеттер contactEmail
```
set contactEmail(value: string)
```
Назначение: Устанавливает значение поля email и обновляет валидность формы. Принимает параметром `value: string` - email для установки.

3. Сеттер contactPhone
```
set contactPhone(value: string)
```
Назначение: Устанавливает значение поля телефона и обновляет валидность формы. Принимает параметром: `value: string` — телефон для установки.


#### Класс Success
Назначение класса: Класс Success представляет компонент для отображения финального окна успешного оформления заказа. Наследуется от Component<{}>. Позволяет показать итоговую сумму списанных «синапсов» и предоставляет возможность закрытия окна через кнопку.

Структура класса:

##### Защищенные свойства
```
protected _close: HTMLElement;       // Кнопка закрытия окна
protected _description: HTMLElement; // Элемент для отображения суммы списанных синапсов
```

Конструктор
```
constructor(container: HTMLElement, actions: ISuccessActions)
```
Назначение: Инициализирует экземпляр класса Success. Находит элементы кнопки закрытия и абзаца с суммой в DOM и подключает обработчик клика по кнопке закрытия, если передан коллбек. Принимает 2 параметра: `container: HTMLElement` - контейнер компонента успеха, `actions: ISuccessActions` - объект с коллбеками действий компонента, `onClick: () => void` - функция, вызываемая при клике на кнопку закрытия.

##### Публичные методы и свойства
1. Сеттер total
```
set total(value: number)
```
Назначение: Устанавливает и отображает текст с суммой списанных синапсов в формате "Списано ${value} синапсов". Принимает параметром: `value: number` - сумма для отображения.

2. Метод render
```
render(): HTMLElement
```
Назначение: Возвращает корневой DOM-элемент компонента, готовый к вставке в модальное окно.



#### Класс Page
Назначение класса: Класс Page управляет основным отображением страницы приложения. Наследуется от Component<IPage> и обеспечивает управление каталогом товаров, счётчиком корзины, блокировкой прокрутки страницы и обработкой клика по корзине для открытия модального окна.

Структура класса:

##### Защищенные свойства
```
protected _counter: HTMLElement; // Элемент для отображения счётчика товаров в корзине
protected _catalog: HTMLElement; // Контейнер для каталога товаров
protected _wrapper: HTMLElement; // Обёртка всей страницы, используется для блокировки скролла
protected _basket: HTMLElement;  // Кнопка корзины в шапке страницы

```

Конструктор:
```
constructor(container: HTMLElement, protected events: IEvents)
```
Назначение: Инициализирует экземпляр класса Page. Находит ключевые элементы DOM (счётчик корзины, каталог, обёртку страницы, кнопку корзины) и подключает обработчик клика по корзине, который генерирует событие `bids:open`. Принимает 2 параметра: `container: HTMLElement` - корневой контейнер страницы, `events: IEvents` - система событий для генерации и обработки событий приложения.

##### Публичные методы и свойства:

1. Сеттер counter
```
set counter(value: number)
```
Назначение: Устанавливает значение счётчика товаров в корзине. Принимает параметром: `value: number` - количество товаров для отображения.

2. Сеттер catalog
```
set catalog(items: HTMLElement[])
```
Назначение: Обновляет содержимое каталога товаров на странице, заменяя текущие элементы на новые. Принимает параметром: `items: HTMLElement[]` - массив HTML-элементов товаров для отображения

3. Сеттер locked
```
set locked(value: boolean)
```
Назначение: Блокирует или разблокирует прокрутку страницы и добавляет/удаляет CSS-класс блокировки для обёртки страницы. Принимает параметром: `value: boolean` - флаг блокировки страницы (true - заблокировать, false - разблокировать)